package cmd

import (
	"fmt"
	"os"

	"github.com/spf13/cobra"
)

var rootCMD = &cobra.Command{
	Use:   "migmig",
	Short: "migmig is database migration tool",
}

var (
	// configPath is the path to the config file
	configPath string
)

const AsciiArt = `
.----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.
| .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |
| | ____    ____ | || |     _____    | || |    ______    | || | ____    ____ | || |     _____    | || |    ______    | |
| ||_   \  /   _|| || |    |_   _|   | || |  .' ___  |   | || ||_   \  /   _|| || |    |_   _|   | || |  .' ___  |   | |
| |  |   \/   |  | || |      | |     | || | / .'   \_|   | || |  |   \/   |  | || |      | |     | || | / .'   \_|   | |
| |  | |\  /| |  | || |      | |     | || | | |    ____  | || |  | |\  /| |  | || |      | |     | || | | |    ____  | |
| | _| |_\/_| |_ | || |     _| |_    | || | \ '.___]  _| | || | _| |_\/_| |_ | || |     _| |_    | || | \ '.___]  _| | |
| ||_____||_____|| || |    |_____|   | || |  '._____.'   | || ||_____||_____|| || |    |_____|   | || |  '._____.'   | |
| |              | || |              | || |              | || |              | || |              | || |              | |
| '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |
'----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'
`

func init() {
	cobra.OnInitialize(func() {
		fmt.Print(AsciiArt + "\n")
	})

	rootCMD.PersistentFlags().StringVar(&configPath, "config", "", "config file")

	rootCMD.AddCommand(startCMD)
}

func Execute() {
	if err := rootCMD.Execute(); err != nil {
		fmt.Fprintln(os.Stderr, err)
		os.Exit(1)
	}
}
